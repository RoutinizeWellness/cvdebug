try {
  return JSON.parse(cleaned);
} catch (e) {
  // Strategy 3: Aggressive cleanup (if simple parse failed)
  // Sometimes there are leading/trailing characters that aren't markdown
  const firstBrace = cleaned.indexOf('{');
  const lastBrace = cleaned.lastIndexOf('}');
  if (firstBrace !== -1 && lastBrace !== -1) {
    return JSON.parse(cleaned.substring(firstBrace, lastBrace + 1));
  }
  throw e;
}

} catch (error) {
  console.error("[extractJSON] Error during JSON extraction:", error);
  return null;
}